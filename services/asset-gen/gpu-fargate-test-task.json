{
    "family": "gameforge-sdxl-gpu-fargate-test",
    "requiresCompatibilities": ["FARGATE"],
    "networkMode": "awsvpc",
    "cpu": "2048",
    "memory": "4096", 
    "executionRoleArn": "arn:aws:iam::927588814706:role/ecsTaskExecutionRole",
    "taskRoleArn": "arn:aws:iam::927588814706:role/ecsTaskExecutionRole",
    "containerDefinitions": [
        {
            "name": "sdxl-gpu-test",
            "image": "public.ecr.aws/docker/library/python:3.11-slim",
            "cpu": 0,
            "memory": 3584,
            "portMappings": [
                {
                    "containerPort": 8080,
                    "protocol": "tcp"
                }
            ],
            "essential": true,
            "command": [
                "bash", "-c", 
                "apt-get update && apt-get install -y curl && pip install --no-cache-dir torch torchvision --index-url https://download.pytorch.org/whl/cpu && pip install --no-cache-dir fastapi uvicorn pillow pydantic diffusers transformers accelerate safetensors && python -c \"from fastapi import FastAPI; import uvicorn; app = FastAPI(); @app.get('/health'): def health(): return {'status': 'healthy', 'service': 'gpu-test-fargate', 'gpu_available': False}; @app.get('/test'): def test(): return {'message': 'GPU container definition test successful', 'mode': 'cpu_fallback'}; uvicorn.run(app, host='0.0.0.0', port=8080)\""
            ],
            "logConfiguration": {
                "logDriver": "awslogs",
                "options": {
                    "awslogs-group": "/ecs/gameforge-sdxl-gpu-test",
                    "awslogs-region": "us-east-1",
                    "awslogs-stream-prefix": "ecs"
                }
            },
            "healthCheck": {
                "command": ["CMD-SHELL", "curl -f http://localhost:8080/health || exit 1"],
                "interval": 60,
                "timeout": 10,
                "retries": 3,
                "startPeriod": 120
            }
        }
    ]
}
